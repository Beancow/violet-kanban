import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as n,R as Y}from"./index-0yr9KlQE.js";import{r as je}from"./index-tymuTqDW.js";import{b as Fe,P as Le,d as C,e as U,c as Oe,u as ue,R as Me,f as D,B as ke,g as Ve,V as le,h as Ke,i as $e}from"./index-CUsz_pzo.js";import{c as He}from"./index-BgsicNeh.js";import{u as We}from"./mocks-CWpEX7Zs.js";import"./index-DotmK1FS.js";import"./QueueProvider-khQ-P9eI.js";var ee="ToastProvider",[te,Ue,Ye]=He("Toast"),[pe,Rt]=Oe("Toast",[Ye]),[Xe,X]=pe(ee),fe=e=>{const{__scopeToast:t,label:s="Notification",duration:o=5e3,swipeDirection:d="right",swipeThreshold:l=50,children:p}=e,[T,v]=n.useState(null),[a,R]=n.useState(0),E=n.useRef(!1),j=n.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${ee}\`. Expected non-empty \`string\`.`),r.jsx(te.Provider,{scope:t,children:r.jsx(Xe,{scope:t,label:s,duration:o,swipeDirection:d,swipeThreshold:l,toastCount:a,viewport:T,onViewportChange:v,onToastAdd:n.useCallback(()=>R(b=>b+1),[]),onToastRemove:n.useCallback(()=>R(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:E,isClosePausedRef:j,children:p})})};fe.displayName=ee;var me="ToastViewport",Be=["F8"],J="toast.viewportPause",Q="toast.viewportResume",Te=n.forwardRef((e,t)=>{const{__scopeToast:s,hotkey:o=Be,label:d="Notifications ({hotkey})",...l}=e,p=X(me,s),T=Ue(s),v=n.useRef(null),a=n.useRef(null),R=n.useRef(null),E=n.useRef(null),j=ue(t,E,p.onViewportChange),b=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=p.toastCount>0;n.useEffect(()=>{const c=y=>{var m;o.length!==0&&o.every(w=>y[w]||y.code===w)&&((m=E.current)==null||m.focus())};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[o]),n.useEffect(()=>{const c=v.current,y=E.current;if(_&&c&&y){const f=()=>{if(!p.isClosePausedRef.current){const h=new CustomEvent(J);y.dispatchEvent(h),p.isClosePausedRef.current=!0}},m=()=>{if(p.isClosePausedRef.current){const h=new CustomEvent(Q);y.dispatchEvent(h),p.isClosePausedRef.current=!1}},w=h=>{!c.contains(h.relatedTarget)&&m()},x=()=>{c.contains(document.activeElement)||m()};return c.addEventListener("focusin",f),c.addEventListener("focusout",w),c.addEventListener("pointermove",f),c.addEventListener("pointerleave",x),window.addEventListener("blur",f),window.addEventListener("focus",m),()=>{c.removeEventListener("focusin",f),c.removeEventListener("focusout",w),c.removeEventListener("pointermove",f),c.removeEventListener("pointerleave",x),window.removeEventListener("blur",f),window.removeEventListener("focus",m)}}},[_,p.isClosePausedRef]);const u=n.useCallback(({tabbingDirection:c})=>{const f=T().map(m=>{const w=m.ref.current,x=[w,...at(w)];return c==="forwards"?x:x.reverse()});return(c==="forwards"?f.reverse():f).flat()},[T]);return n.useEffect(()=>{const c=E.current;if(c){const y=f=>{var x,h,S;const m=f.altKey||f.ctrlKey||f.metaKey;if(f.key==="Tab"&&!m){const F=document.activeElement,A=f.shiftKey;if(f.target===c&&A){(x=a.current)==null||x.focus();return}const N=u({tabbingDirection:A?"backwards":"forwards"}),V=N.findIndex(i=>i===F);G(N.slice(V+1))?f.preventDefault():A?(h=a.current)==null||h.focus():(S=R.current)==null||S.focus()}};return c.addEventListener("keydown",y),()=>c.removeEventListener("keydown",y)}},[T,u]),r.jsxs(ke,{ref:v,role:"region","aria-label":d.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&r.jsx(Z,{ref:a,onFocusFromOutsideViewport:()=>{const c=u({tabbingDirection:"forwards"});G(c)}}),r.jsx(te.Slot,{scope:s,children:r.jsx(D.ol,{tabIndex:-1,...l,ref:j})}),_&&r.jsx(Z,{ref:R,onFocusFromOutsideViewport:()=>{const c=u({tabbingDirection:"backwards"});G(c)}})]})});Te.displayName=me;var ve="ToastFocusProxy",Z=n.forwardRef((e,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:o,...d}=e,l=X(ve,s);return r.jsx(le,{"aria-hidden":!0,tabIndex:0,...d,ref:t,style:{position:"fixed"},onFocus:p=>{var a;const T=p.relatedTarget;!((a=l.viewport)!=null&&a.contains(T))&&o()}})});Z.displayName=ve;var M="Toast",ze="toast.swipeStart",qe="toast.swipeMove",Ge="toast.swipeCancel",Je="toast.swipeEnd",we=n.forwardRef((e,t)=>{const{forceMount:s,open:o,defaultOpen:d,onOpenChange:l,...p}=e,[T,v]=Fe({prop:o,defaultProp:d??!0,onChange:l,caller:M});return r.jsx(Le,{present:s||T,children:r.jsx(et,{open:T,...p,ref:t,onClose:()=>v(!1),onPause:U(e.onPause),onResume:U(e.onResume),onSwipeStart:C(e.onSwipeStart,a=>{a.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:C(e.onSwipeMove,a=>{const{x:R,y:E}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","move"),a.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${R}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${E}px`)}),onSwipeCancel:C(e.onSwipeCancel,a=>{a.currentTarget.setAttribute("data-swipe","cancel"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:C(e.onSwipeEnd,a=>{const{x:R,y:E}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","end"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${R}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${E}px`),v(!1)})})})});we.displayName=M;var[Qe,Ze]=pe(M,{onClose(){}}),et=n.forwardRef((e,t)=>{const{__scopeToast:s,type:o="foreground",duration:d,open:l,onClose:p,onEscapeKeyDown:T,onPause:v,onResume:a,onSwipeStart:R,onSwipeMove:E,onSwipeCancel:j,onSwipeEnd:b,..._}=e,u=X(M,s),[c,y]=n.useState(null),f=ue(t,i=>y(i)),m=n.useRef(null),w=n.useRef(null),x=d||u.duration,h=n.useRef(0),S=n.useRef(x),F=n.useRef(0),{onToastAdd:A,onToastRemove:z}=u,I=U(()=>{var P;(c==null?void 0:c.contains(document.activeElement))&&((P=u.viewport)==null||P.focus()),p()}),N=n.useCallback(i=>{!i||i===1/0||(window.clearTimeout(F.current),h.current=new Date().getTime(),F.current=window.setTimeout(I,i))},[I]);n.useEffect(()=>{const i=u.viewport;if(i){const P=()=>{N(S.current),a==null||a()},g=()=>{const L=new Date().getTime()-h.current;S.current=S.current-L,window.clearTimeout(F.current),v==null||v()};return i.addEventListener(J,g),i.addEventListener(Q,P),()=>{i.removeEventListener(J,g),i.removeEventListener(Q,P)}}},[u.viewport,x,v,a,N]),n.useEffect(()=>{l&&!u.isClosePausedRef.current&&N(x)},[l,x,u.isClosePausedRef,N]),n.useEffect(()=>(A(),()=>z()),[A,z]);const V=n.useMemo(()=>c?ge(c):null,[c]);return u.viewport?r.jsxs(r.Fragment,{children:[V&&r.jsx(tt,{__scopeToast:s,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),r.jsx(Qe,{scope:s,onClose:I,children:je.createPortal(r.jsx(te.ItemSlot,{scope:s,children:r.jsx(Me,{asChild:!0,onEscapeKeyDown:C(T,()=>{u.isFocusedToastEscapeKeyDownRef.current||I(),u.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(D.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":u.swipeDirection,..._,ref:f,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:C(e.onKeyDown,i=>{i.key==="Escape"&&(T==null||T(i.nativeEvent),i.nativeEvent.defaultPrevented||(u.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:C(e.onPointerDown,i=>{i.button===0&&(m.current={x:i.clientX,y:i.clientY})}),onPointerMove:C(e.onPointerMove,i=>{if(!m.current)return;const P=i.clientX-m.current.x,g=i.clientY-m.current.y,L=!!w.current,O=["left","right"].includes(u.swipeDirection),K=["left","up"].includes(u.swipeDirection)?Math.min:Math.max,Ie=O?K(0,P):0,De=O?0:K(0,g),q=i.pointerType==="touch"?10:2,$={x:Ie,y:De},ne={originalEvent:i,delta:$};L?(w.current=$,H(qe,E,ne,{discrete:!1})):ae($,u.swipeDirection,q)?(w.current=$,H(ze,R,ne,{discrete:!1}),i.target.setPointerCapture(i.pointerId)):(Math.abs(P)>q||Math.abs(g)>q)&&(m.current=null)}),onPointerUp:C(e.onPointerUp,i=>{const P=w.current,g=i.target;if(g.hasPointerCapture(i.pointerId)&&g.releasePointerCapture(i.pointerId),w.current=null,m.current=null,P){const L=i.currentTarget,O={originalEvent:i,delta:P};ae(P,u.swipeDirection,u.swipeThreshold)?H(Je,b,O,{discrete:!0}):H(Ge,j,O,{discrete:!0}),L.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),u.viewport)})]}):null}),tt=e=>{const{__scopeToast:t,children:s,...o}=e,d=X(M,t),[l,p]=n.useState(!1),[T,v]=n.useState(!1);return rt(()=>p(!0)),n.useEffect(()=>{const a=window.setTimeout(()=>v(!0),1e3);return()=>window.clearTimeout(a)},[]),T?null:r.jsx(Ve,{asChild:!0,children:r.jsx(le,{...o,children:l&&r.jsxs(r.Fragment,{children:[d.label," ",s]})})})},ot="ToastTitle",xe=n.forwardRef((e,t)=>{const{__scopeToast:s,...o}=e;return r.jsx(D.div,{...o,ref:t})});xe.displayName=ot;var st="ToastDescription",Ee=n.forwardRef((e,t)=>{const{__scopeToast:s,...o}=e;return r.jsx(D.div,{...o,ref:t})});Ee.displayName=st;var ye="ToastAction",he=n.forwardRef((e,t)=>{const{altText:s,...o}=e;return s.trim()?r.jsx(Ce,{altText:s,asChild:!0,children:r.jsx(Re,{...o,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${ye}\`. Expected non-empty \`string\`.`),null)});he.displayName=ye;var Pe="ToastClose",Re=n.forwardRef((e,t)=>{const{__scopeToast:s,...o}=e,d=Ze(Pe,s);return r.jsx(Ce,{asChild:!0,children:r.jsx(D.button,{type:"button",...o,ref:t,onClick:C(e.onClick,d.onClose)})})});Re.displayName=Pe;var Ce=n.forwardRef((e,t)=>{const{__scopeToast:s,altText:o,...d}=e;return r.jsx(D.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...d,ref:t})});function ge(e){const t=[];return Array.from(e.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&t.push(o.textContent),nt(o)){const d=o.ariaHidden||o.hidden||o.style.display==="none",l=o.dataset.radixToastAnnounceExclude==="";if(!d)if(l){const p=o.dataset.radixToastAnnounceAlt;p&&t.push(p)}else t.push(...ge(o))}}),t}function H(e,t,s,{discrete:o}){const d=s.originalEvent.currentTarget,l=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&d.addEventListener(e,t,{once:!0}),o?$e(d,l):d.dispatchEvent(l)}var ae=(e,t,s=0)=>{const o=Math.abs(e.x),d=Math.abs(e.y),l=o>d;return t==="left"||t==="right"?l&&o>s:!l&&d>s};function rt(e=()=>{}){const t=U(e);Ke(()=>{let s=0,o=0;return s=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(o)}},[t])}function nt(e){return e.nodeType===e.ELEMENT_NODE}function at(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const d=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||d?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function G(e){const t=document.activeElement;return e.some(s=>s===t?!0:(s.focus(),document.activeElement!==t))}var it=fe,ct=Te,be=we,_e=xe,Se=Ee,Ne=he;const dt="_viewport_jvrn6_1",ut="_toastRoot_jvrn6_17",lt="_toastTitle_jvrn6_50",pt="_toastDescription_jvrn6_58",ft="_toastAction_jvrn6_66",k={viewport:dt,toastRoot:ut,toastTitle:lt,toastDescription:pt,toastAction:ft},mt=it,Ae=()=>r.jsx(ct,{className:k.viewport}),B=Y.forwardRef(({className:e,...t},s)=>r.jsx(be,{ref:s,className:`${k.toastRoot} ${e}`,...t}));B.displayName=be.displayName;const oe=Y.forwardRef(({className:e,...t},s)=>r.jsx(_e,{ref:s,className:`${k.toastTitle} ${e}`,...t}));oe.displayName=_e.displayName;const se=Y.forwardRef(({className:e,...t},s)=>r.jsx(Se,{ref:s,className:`${k.toastDescription} ${e}`,...t}));se.displayName=Se.displayName;const re=Y.forwardRef(({className:e,...t},s)=>r.jsx(Ne,{ref:s,className:`${k.toastAction} ${e}`,...t}));re.displayName=Ne.displayName;Ae.__docgenInfo={description:"",methods:[],displayName:"ToastViewport"};B.__docgenInfo={description:"",methods:[]};oe.__docgenInfo={description:"",methods:[]};se.__docgenInfo={description:"",methods:[]};re.__docgenInfo={description:"",methods:[]};const Ct={title:"Components/Toast",component:B,tags:["autodocs"]},W={args:{title:"Saved",description:"Your changes were saved.",actionLabel:"Undo"},render:e=>(We(),r.jsx(mt,{children:r.jsxs(r.Fragment,{children:[r.jsxs(B,{children:[r.jsx(oe,{children:e.title}),r.jsx(se,{children:e.description}),r.jsx(re,{asChild:!0,altText:e.actionLabel,children:r.jsx("button",{children:e.actionLabel})})]}),r.jsx(Ae,{})]})}))};var ie,ce,de;W.parameters={...W.parameters,docs:{...(ie=W.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    title: 'Saved',
    description: 'Your changes were saved.',
    actionLabel: 'Undo'
  } as Partial<ToastArgs>,
  render: (args: any) => {
    useMockOrganization();
    return <ToastProvider>
                <>
                    <ToastRoot>
                        <ToastTitle>{args.title}</ToastTitle>
                        <ToastDescription>{args.description}</ToastDescription>
                        <ToastAction asChild altText={args.actionLabel}>
                            <button>{args.actionLabel}</button>
                        </ToastAction>
                    </ToastRoot>
                    <ToastViewport />
                </>
            </ToastProvider>;
  }
}`,...(de=(ce=W.parameters)==null?void 0:ce.docs)==null?void 0:de.source}}};const gt=["Default"];export{W as Default,gt as __namedExportsOrder,Ct as default};
